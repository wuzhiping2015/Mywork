<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Helios </title>
		<link rel="stylesheet" href="assets/css/bootstrap.min.css?2019827" />
		<link rel="stylesheet" href="assets/css/global.css?2019827" />
		<!-- Font Awesome -->
		<link rel="stylesheet" href="assets/css/font-awesome.min.css?2019827" />
		<!-- Theme style -->
		<link rel="stylesheet" href="assets/css/AdminLTE.min.css?2019827" />
		<link rel="stylesheet" href="assets/css/skins/skin-black.min.css?2019827" />
		<link rel="stylesheet" href="assets/css/index.css?2019827">

	</head>
	<style>
		.viswCard span {
	color: #fff;
	margin-right: 0px;
	}
	.box-header .el-button--mini, .el-button--mini.is-round {
		padding: 1px 3px;
		color: #fff;
	   vertical-align: middle;
	}
	.el-input{
		vertical-align: middle;
	}
	.label-text-vm {
	    text-align: left;
	}
	#donut-chart {
		margin: 10px 0;
	}
	.chart-legend {
		width: 70%;
		margin: 0px auto;
	}
	.chart-legend  li{
	float: left;
	font-size: 14px;
	
	}
	.chart-legend  li:last-child{
		float: right;
	}
	.alldata{
		      overflow: hidden;
		      background-color: #fbfbfb;
		      border-top: 1px solid #edeaea;
		      border-left: 1px solid #edeaea;
	}
	.alldata ul li{
		width: 50%;
		float: left;
		padding: 20px;
		color: #505b65;
		text-align: center;
		
		border-right: 1px solid #edeaea;
		border-bottom: 1px solid #edeaea;
		box-sizing: border-box;
		-moz-box-sizing: border-box;
		-webkit-box-sizing: border-box;
		-webkit-transition: all 100ms ease;
		-moz-transition: all 100ms ease;
		-ms-transition: all 100ms ease;
		-o-transition: all 100ms ease;
		transition: all 100ms ease;
	}
	.alldata ul li:hover {
	    color: #fff;
	    background-color:rgb(57, 204, 204);
	    border-color: rgb(57, 204, 204);
	}
	.alldata ul li:hover p{
		 color: #fff;
	}
	.alldata  ul h3{
		padding-top: 8px;
		padding-bottom: 8px;
	}
	.alldata  ul p{
		font-size: 14px;
		color:#00a65a ;
	}
</style>

	<body class="skin-black sidebar-collapse sidebar-mini">
		<!-- hold-transition skin-blue-light sidebar-mini sidebar-collapse -->
		<div class="wrapper">
			<!-- 页头 -->
			<div id="comp-header" class="main-header" style="position: relative; z-index: 99;">
				<el-main-header :loguser="logUserName"></el-main-header>
			</div>
			<!-- 页头end -->

			<!-- 侧边栏导航 -->
			<div id="comp-sidebar">
				<el-main-sidebar></el-main-sidebar>
			</div>
			<!-- 侧边栏导航 end -->

			<!-- 内容区域 -->
			<div class="content-wrapper" id="content-wrapper">

				<!-- 内容头部面包屑 -->
				<section class="" style="display: none">
					<ol class="breadcrumb">
						<li>
							<a id="head1" href="#"></a>
						</li>
						<li id="head2" class="active"></li>
					</ol>
				</section>
				<!-- 主要内容显示 -->
				<section class="content container-fluid" id="MainContext" style="padding:15px; min-width: 1200px;">

					<div class="row">
						<div class="col-md-12">

							<div class="box">
								<div class="box-body">
									<div class="row">




										<!-- 整体数据 -->
										<div class="col-xs-4 mt15" style="margin-left: 10px; margin-right:10px;">
											<div class="alldata">
												<div class="box-header ui-sortable-handle">
													<i class="fa fa-bar-chart-o"></i>
													<h3 class="box-title">平台/总体数据</h3>
												</div>
												<ul>
													<li>
														<div class="inner">
															<h3>在线设备 </h3>
															<p>6000</p>
														</div>
													</li>
													<li>
														<div class="inner">
															<h3>离线设备</h3>
															<p>6000</p>
														</div>
													</li>
													<li>
														<div class="inner">
															<h3>注册设备 </h3>
															<p>6000</p>
														</div>
													</li>
													<li>
														<div class="inner">
															<h3>待处理告警</h3>
															<p>6000</p>
														</div>
													</li>
												</ul>
											</div>
										</div>

										<div class="col-md-3" style="text-align: center;">
											<ul class="chart-legend clearfix" style="font-size: 14px; display: none;">
												<li><i class="fa fa-inbox text-green"></i>
													当前系统设备总量
													<font style="font-size: 22px; color:#00a65a ;  vertical-align: -1px;"> 15222</font> 台</li>
											</ul>

											<div class="chart-responsive">
												<div id="donut-chart" style="width: 100%; height: 250px;"></div>
											</div>
											<div>
												<ul class="chart-legend clearfix">
													<li><i class="fa fa-circle-o text-green"></i> 在线 / 600</li>
													<li><i class="fa fa-circle-o text-red"></i> 离线 / 100</li>
												</ul>
											</div>
										</div>
										<!-- 今日 -->
										<div class="col-xs-4 mt15" style="padding-left: 0px; margin-left: 20px;">
											<div class="alldata">
												<div class="box-header ui-sortable-handle">
													<i class="fa fa-bar-chart-o "></i>
													<h3 class="box-title">平台/今日数据</h3>
												</div>
												<ul>
													<li>
														<div class="inner">
															<h3>新上线设备 </h3>
															<p>6000</p>
														</div>
													</li>
													<li>
														<div class="inner">
															<h3>离线设备</h3>
															<p>6000</p>
														</div>
													</li>
													<li>
														<div class="inner">
															<h3>累计告警 </h3>
															<p>6000</p>
														</div>
													</li>
													<li>
														<div class="inner">
															<h3>待处理告警</h3>
															<p>6000</p>
														</div>
													</li>
												</ul>
											</div>

										</div>


									</div>



								</div>

							</div>

						</div>



						<div class="col-xs-12">
							<div class="box">
								<div class="box-body tc">
									<h3>这里是地图4444</h3>
									<div class="col-xs-12" id="googleMap" style="height: 600px;"></div>

								</div>

							</div>
						</div>

					</div>

				</section>
			</div>

		</div>

		<script type="text/javascript" src="assets/js/jquery.js"></script>
		<script type="text/javascript" src="assets/js/vue.js"></script>


		<script type="text/javascript" src="assets/js/index.js"></script>
		<script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="assets/js/adminlte.js"></script>

		<script type="text/javascript" src="assets/js/comment.js"></script>



		<!-- 数据饼 start -->
		<!-- FLOT CHARTS -->
		<script src="assets/js/Flot/jquery.flot.js"> </script>
		<!-- FLOT RESIZE PLUGIN - allows the chart to redraw when the
	         window is resized -->
		<script src="assets/js/Flot/jquery.flot.resize.js"></script>
		<!-- FLOT PIE PLUGIN - also used to draw donut charts -->
		<script src="assets/js/Flot/jquery.flot.pie.js"></script>
		<!-- FLOT CATEGORIES PLUGIN - Used to draw bar charts -->
		<script src="assets/js/Flot/jquery.flot.categories.js"></script>
		<!-- 数据饼 start -->



		<script type="text/javascript">
			function loadScript() {
				var script = document.createElement("script");
				script.type = "text/javascript";
				script.src =
					"https://maps.googleapis.com/maps/api/js?key=AIzaSyA3xfcoZkTNWS8VeUeyliLExA2zN51OGCw&sensor=false&callback=initialize";
				document.body.appendChild(script);
			}
			window.onload = loadScript;


			function initialize() {
				var myLatlng = new google.maps.LatLng(22.285520553589, 114.15769195557);
				var myOptions = {
					//Zoom（缩放级数）
					zoom: 10,
					//center（中心点）
					center: myLatlng,

					//MapTypeId（地图的初始类型）
					mapTypeId: google.maps.MapTypeId.TERRAIN
				}

				//创建一个 Map 对象
				var map = new google.maps.Map(document.getElementById('googleMap'), myOptions);

				map.setCenter(myLatlng);

				var contentString =
					'<strong>国家 名称: </strong>香港<br /><strong>区域 名称: </strong>Hong Kong (SAR)<br /><strong>城市 名称: </strong>Hong Kong<br /><strong>IP: </strong>168.63.209.161<br />';

				var infowindow = new google.maps.InfoWindow({
					content: contentString
				});
				//Google 地图 - 添加标记
				var marker = new google.maps.Marker({
					map: map,
					position: myLatlng
				});

				infowindow.open(map, marker); //打开信息窗口。一般与map和标记关联
				google.maps.event.addListener(marker, 'click', function() {
					infowindow.open(map, marker);
				});

			}

			//加载地图
			google.maps.event.addDomListener(window, 'load', initialize);
		</script>



		<script type="text/javascript">
			//数据饼 start
			$(function() {



				var donutData = [{
						label: '在线',
						data: 500,
						color: '#00a65a'
					},
					{
						label: '离线',
						data: 300,
						color: '#ff851b'
					},

				]
				$.plot('#donut-chart', donutData, {
					series: {
						pie: {
							show: true,
							radius: 1,
							innerRadius: 0.5,
							label: {
								show: true,
								radius: 2 / 2.7,
								formatter: labelFormatter,
								threshold: 0.1
							}

						}
					},
					legend: {
						show: false
					}
				})

			})
			//数据饼 start



			function labelFormatter(label, series) {
				console.log(label);
				console.log(series);
				return '<div style="font-size:13px; text-align:center; padding:2px; color: #fff; font-weight: 600;">' +
					label +
					'<br>' +
					Math.round(series.percent) + '%</div>'
			}


			var app;
			let data = {
				tableDataBegin: [],
				tableDataName: "",
				tableDataEnd: [],
				currentPage: 1,
				pageSize: 5,
				totalItems: 2,
				filterTableDataEnd: [],
				flag: false,
				Switch: false,
				Switch1: true,
				delVisible: false,


			};
			app = new Vue({
				el: "#content-wrapper",
				data: data,
				created: function() {
					/* console.log("创建完成："); */
				},
				//监听器，计算属性
				computed: {
					rescom: function() {
						return (Number(vm.n) + Number(vm.n1)) * 3;
					}
				},
				mounted() {

					/* 	this.$nextTick(function() {
							this.drawPie("piereport");
						}); */


					/* console.log("时时监控数据变化,并随之更新");*/
					$("body").resize();
					this.getdata();

				},

				updated() {
					// console.log("==更新成功==");
					//console.log(this.$data);
				},

				methods: {


					/* 初始进入系统请求数据 */
					getdata() {
						/* 	let url = "http://jsonplaceholder.typicode.com/users";
							util.getattrajax(url, function(data) { */

						var dataajax = [{
								id: "福建网络",
								name: "2",
								type: "20 / 8",
								bantype: 2,
								address: 2,
								switch: 2,
							},
							{
								id: "澳门网络",
								name: "2",
								type: "20 / 8",
								bantype: 2,
								address: 2,
								switch: 2,
							},
							{
								id: "新加坡网络",
								name: "2",
								type: "20 / 8",
								bantype: 2,
								address: 2,
								switch: 1,
							},
							{
								id: "伊拉克网络",
								name: "2",
								type: "20 / 8",
								bantype: 2,
								address: 2,
								switch: 1,
							}
						];



						if (this.totalItems > this.pageSize) {
							this.totalItems = dataajax.length;
							for (let index = 0; index < this.pageSize; index++) {
								this.tableDataEnd.push({
									id: dataajax[index].id,
									name: dataajax[index].name,
									type: dataajax[index].username,
									bantype: dataajax[index].website,
									address: dataajax[index].id,
									switch: dataajax[index].id,
								});
							}
						} else {
							this.tableDataEnd = dataajax;

						}
						dataajax.forEach((value, index) => {
							this.tableDataBegin.push({
								id: value.id,
								name: value.name,
								type: value.username,
								bantype: value.website,
								address: value.id,
								switch: value.id,
							});
						})
						toast.$message({
							message: '数据同步成功',
							type: 'success',
							offset: 80
						});
						/* }); */
					},
					/* 初始进入系统请求数据  end*/

					//组件自带监控当前页码  start**************
					//前端搜索功能需要区分是否检索,因为对应的字段的索引不同
					//用两个变量接收currentChangePage函数的参数
					handleSizeChange(val) {
						console.log(`每页 ${val} 条`);
						this.pageSize = val;
						this.handleCurrentChange(1);
					},
					handleCurrentChange(val) {
						//console.log(`当前页: ${val}`);
						this.currentPage = val;
						//需要判断是否检索
						if (!this.flag) {
							this.currentChangePage(this.tableDataBegin);
							console.log(this.tableDataEnd);
						} else {
							this.currentChangePage(this.filterTableDataEnd);
							console.log(this.tableDataEnd);
						}
					},
					//全局数据联动查询 方法**********************
					currentChangePage(list) {
						let from = (this.currentPage - 1) * this.pageSize;
						let to = this.currentPage * this.pageSize;
						this.tableDataEnd = [];
						for (; from < to; from++) {
							if (list[from]) {
								this.tableDataEnd.push(list[from]);
							}
						}
					},

					//组件自带监控当前页码   end**************


					//搜索 **********************
					doFilter() {
						if (this.tableDataName == "") {
							this.$message.warning("查询条件不能为空！");
							return;
						}
						this.tableDataEnd = []
						//每次手动将数据置空,因为会出现多次点击搜索情况
						this.filterTableDataEnd = []
						this.tableDataBegin.forEach((value, index) => {
							if (value.name) {
								if (value.name.indexOf(this.tableDataName) >= 0) {
									this.filterTableDataEnd.push(value)
								}
							}
						});
						//页面数据改变重新统计数据数量和当前页
						this.currentPage = 1
						this.totalItems = this.filterTableDataEnd.length
						//渲染表格,根据值
						this.currentChangePage(this.filterTableDataEnd)
						//页面初始化数据需要判断是否检索过
						this.flag = true
					},




					//删除**********************
					delerow: function(index, rows) {
						toast.$confirm("此操作将永久删除该数据，是否继续", "提示", {
							confirmButtonText: "确定",
							cancelButtonText: '取消',
							type: "warning"
						}).then(() => {
							rows.splice(index, 1);
							/* toast.$notify({
								title: '成功',
								message: '删除成功',
								type: 'success',
								duration: 1000
							}); */
							this.$message.success("删除成功");
						});
					},



					//查看设备
					lookmax(index, value) {
						console.log(index);

						/* let url = "http://jsonplaceholder.typicode.com/users/" + index;
						util.getattrajax(url, function(data) {
							console.log(data);
						}); */
						window.location.href = 'Basicinfo.html';
						sessionStorage.setItem("lookmax", index);

					},
					//设置设备
					setmax(index) {
						window.location.href = 'configuration.html';
						sessionStorage.setItem("setmax", index);
					},


					//数据同步**********************
					openData() {
						this.tableDataName = "";
						//this.tableDataEnd = this.tableDataBegin;
						//每次手动将数据置空,因为会出现多次点击搜索情况
						this.$message.success("数据同步成功");
						this.filterTableDataEnd = []
						this.tableDataBegin.forEach((value, index) => {
							this.filterTableDataEnd.push(value);
						});
						this.currentPage = 1;
						this.totalItems = this.filterTableDataEnd.length;
						this.currentChangePage(this.filterTableDataEnd);
						this.flag = true;
					},

					//设备状态***********
					selcome_swit(row, column, cellValue, index) {
						if (cellValue === 1) {
							return "正常";
						} else {
							return "失效";
						}
					},
					substr_name(row, column, cellValue, index) {
						let val = "";
						val = cellValue.substring(0, 6);
						return val;
						//console.log(cellValue)
					}

				},

			})
		</script>
	</body>
</html>
