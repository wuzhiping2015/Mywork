<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>ROC </title>
		<link rel="stylesheet" href="assets/css/bootstrap.min.css?2019827" />
		<link rel="stylesheet" href="assets/css/global.css?2019827" />
		<!-- Font Awesome -->
		<link rel="stylesheet" href="assets/css/font-awesome.min.css?2019827" />
		<!-- Theme style -->
		<link rel="stylesheet" href="assets/css/AdminLTE.min.css?2019827" />
		<link rel="stylesheet" href="assets/css/skins/skin-black.min.css?2019827" />
		<link rel="stylesheet" href="assets/css/index.css?2019827">
	</head>

	<style scoped>
		[class*="col-grid-s"]>li {
			width: 410px;
		}
	
		.nav-tabs-custom li {
			width: 120%;
		}
	
		.box .box-footer {
			border-top: 0px;
		}
	
		.label {
			font-size: 120%;
		}
	
		.el-dialog {
			width: 30%;
		}
	
		td span small {
			cursor: pointer;
		}
	
		.el-button--mini,
		.el-button--mini.is-round {
			padding: 1px 3px;
			color: #fff
		}
	
		.viswCard span {
			color: #fff;
			margin-right: 0px;
		}
		.viswCard {
			position: inherit;
			top: 4px;
			text-align: center;
		}
		.table-hover td {
			text-indent: 6px;
		}
	
		.table>tbody>tr.add>td,
		.table>tbody>tr>td.res {
			font-weight: bold;
			color: #333;
		}
	
		
	
		.table.res td .label {
			margin-left: 5px;
			float: right;
		}
	
		.el-select,
		.el-input__inner {
			width: 140px !important;
		}
	
		tr td:nth-child(4),
		tr.res td:nth-child(5) {
			background-color: rgb(218, 219, 219);
		}
	
		tr.res td:nth-child(4) {
			background-color: #fff;
		}
	
		.col-xs-2 {
			padding: 0px !important;
			width:14.27% !important;
		}
		.dataTable td{
			height: 45px;
		}
		.el-checkbox-group{
			margin-right: 0px;
			margin-left: 13px;
			float: left;
		}
		.el-checkbox__label{
			padding-left: 2px !important;
		}
		.el-checkbox__inner{
			vertical-align: 1px;
		}
		.col-xs-2.hover:hover{
			background: #f6fbfd;
		}
	</style>


	<body>
		<!-- hold-transition skin-blue-light sidebar-mini sidebar-collapse -->
		<div class="wrapper" id="content" style="background:#f1f4f6; margin-top:2px; margin-bottom: 30px;">
			<!--   Trap Destinations -->
			<div class="box">
				<div class="box-body table-responsive no-padding">

					<div class="col-xs-2 ">
						<table class="table res table-bordered  dataTable first">
							<tbody>
								<tr>
									<td colspan="2" style="height:45px"> </td>
								</tr>
								<tr>
									<td colspan="2"><span class="icon iconfont icon-kongzhitai"></span> <b>Type</b></td>
								</tr>
								<tr>
									<td colspan="2"><strong>UL Output Power</strong></td>
								</tr>
								<tr>
									<td colspan="2"><strong>DL Input Power</strong></td>
								</tr>

								<tr>
									<td colspan="2"><b> Roc Feedback</b></td>
								</tr>

								<tr>
									<td rowspan="5"><b>RF</b></td>
									<td>UL Freq</td>
								</tr>
								<tr>
									<td>DL Freq</td>
								</tr>
								<tr>
									<td>UL ATT</td>
								</tr>
								<tr>
									<td>DL ATT</td>
								</tr>
								<tr>
									<td>Bandwidth</td>
								</tr>
								<tr>
									<td rowspan="4"><b>DL</b></td>
									<td>Over Pwr Th</td>
								</tr>
								<tr>
									<td>Under Pwr Th</td>
								</tr>
								<tr>
									<td>
										<!--Over Pwr--> LP ALARM </td>
								</tr>
								<tr>
									<td>
										<!--Under Pwr-->OP ALARM </td>
								</tr>

								<tr>
									<td rowspan="2"><b>TDD</b></td>
									<td style="height: 49px;">SYNC SOURCE </td>
								</tr>
								<tr>
									<td style="height: 49px;">WORKMODE</td>
								</tr>
							<tbody>
						</table>
					</div>


					<!-- 数据循环 -->
					<div class="col-xs-2 hover" v-for="(v,i) in Roclength">
						<table class="table res table-bordered  dataTable">
							<tbody>
								<tr>
									<td style="height:45px">
										<div class="viswCard">
											<el-button type="success" :disabled="!canSave" size="mini" @click="Setroc_Data(i)">Set
											</el-button> &nbsp;&nbsp;
											<el-button type="primary" :disabled="!Read" size="mini" @click="Getroc_Data(i)">Read
											</el-button>
										</div>
									</td>
								</tr>
								<tr>
									<td>roc {{i}} </td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==6">
									<td>
										{{vv.value[i]}}

									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==7">
									<td>
										{{vv.value[i]}}
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==8">
									<td>
										{{vv.value[i]}}
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==1">
									<td>
										<el-input v-model="vv.value[i]" size="mini"></el-input>
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==2">
									<td>
										<el-input v-model="vv.value[i]" size="mini"></el-input>
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==3">
									<td>
										<el-input v-model="vv.value[i]" size="mini"></el-input>
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==4">
									<td>
										<el-input v-model="vv.value[i]" size="mini"></el-input>
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==5">
									<td>
										<el-input v-model="vv.value[i]" size="mini"></el-input>
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==13">
									<td>
										<el-input v-model="vv.value[i]" size="mini"></el-input>
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==14">
									<td>
										<el-input v-model="vv.value[i]" size="mini"></el-input>
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==9">
									<td style=" padding: 0px;">
										<el-checkbox-group v-model="vv.agent[i]" size="small">
											<el-checkbox label="Agent" border></el-checkbox>
										</el-checkbox-group>

										<el-checkbox-group v-model="vv.enbale[i]" size="small">
											<el-checkbox label="Enable" border></el-checkbox>
										</el-checkbox-group>
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==10">
									<td style=" padding: 0px;">
										<el-checkbox-group v-model="vv.agent[i]" size="small">
											<el-checkbox label="Agent" border></el-checkbox>
										</el-checkbox-group>

										<el-checkbox-group v-model="vv.enbale[i]" size="small">
											<el-checkbox label="Enable" border></el-checkbox>
										</el-checkbox-group>
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==15">
									<td>
										<el-select v-model="vv.value[i]" size="small">
											<el-option label=" TDD " value="0"></el-option>
											<el-option label="上行常开" value="1"></el-option>
											<el-option label="下行常开" value="2"></el-option>
											<el-option label=" FDD " value="3"></el-option>
										</el-select>
									</td>
								</tr>
								<tr v-for="(vv,jj) in Rocdata" v-if="vv.adr==16">
									<td>
										<el-select v-model="vv.value[i]" size="small">
											<el-option label="0" value="0"></el-option>
											<el-option label="1" value="1"></el-option>
											<el-option label="2" value="2"></el-option>
											<el-option label="3" value="3"></el-option>
										</el-select>

									</td>
								</tr>

							</tbody>
						</table>
					</div>
				</div>
			</div>

		</div>
		</div>
		<!--   Trap Destinations-->


		<script type="text/javascript" src="assets/js/jquery.js"></script>
		<script type="text/javascript" src="assets/js/vue.js"></script>
		<script type="text/javascript" src="assets/js/index.js"></script>
		<script type="text/javascript" src="assets/js/comment.js"></script>
		<script>
			let data = {
				app: "",

				canSave: true,
				Read: true,

				value1: "0",
				value: "3",
				form: {
					name: "数据...",
					name1: false
				},
				Rocdata: [],
				Roclength: 0,
			}
			var Helios = new Vue({
				el: "#content",
				data: data,
				created() {
					// console.log("创建完成：");
					console.log((this.$data));

				},
				mounted() {
					/*console.log("");*/
					$("body").resize();

				},
				updated() {
					/*console.log("时时监控数据变化,并随之更新");*/
					//	console.log((this.$data.Rocdata));

					//console.log( JSON.stringify(this.$data.rocdata));
				},
				beforeMount() {
					/* console.log("挂载前：");
					console.log(this.$data); */
					this.Getroc_Data();
				},
				//事件
				methods: {
					/* (9,10) 使能 范围 0-3 */
					Getroc_Data(index) {
						var obj1 = [6, 7, 8, 1, 2, 3, 4, 5, 13, 14, 9, 10, 15, 16];
						var obj = {
							"data": obj1.join(),
							"action": "READ"
						}
						util.getattrajax(obj, function(data) {
							var getdata = [];
							var data = data.data;
							if (data.length > 0) {
								if (index >= 0) {
									Helios.$data.Read = false;
									setTimeout(() => {
										Helios.$data.Read = true;
										toast.$message({
											message: "success:" + index,
											type: 'success',
											showClose: true,
											offset: 40
										});
									}, 1200);
								}


								for (var i = 0; i < data.length; i++) {
									console.log(data[i]);
									if (data[i].adr == 6) {
										let obj = {
											name: "UL POUT",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										Helios.Roclength = obj.value.length;
										getdata.push(obj);
									}
									if (data[i].adr == 7) {
										let obj = {
											name: "DL_PIN",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 8) {
										let obj = {
											name: "ROC FEEDBACK",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 1) {
										let obj = {
											name: "UL_FREQ",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 2) {
										let obj = {
											name: "DL_FREQ",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 3) {
										let obj = {
											name: "ROC BANDWIDTH",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 4) {
										let obj = {
											name: "UL_ATT",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 5) {
										let obj = {
											name: "DL_ATT",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 13) {
										let obj = {
											name: "DL_PIN_LP",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 14) {
										let obj = {
											name: "PIN_OP_TH",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}

									if (data[i].adr == 9) {
										let obj = Helios.ResTruefalse("LP_ALARM", data[i].adr, data[i].value.split(","));
										getdata.push(obj);
									}
									if (data[i].adr == 10) {
										let obj = Helios.ResTruefalse("OP_ALARM", data[i].adr, data[i].value.split(","));
										getdata.push(obj);
									}
									if (data[i].adr == 15) {
										let obj = {
											name: "TDD_WORKMODE",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 16) {
										let obj = {
											name: "SYNC_SOURCE",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
								}

								console.log(getdata);
								Helios.Rocdata = getdata;


							} else {
								util.error("Error");
							}

						});
					},

					Setroc_Data: function(index) {
						Helios.$data.canSave = false;
						var adr = [1, 2, 3, 4, 5, 13, 14, 9, 10, 15, 16];
						var data = [];
						console.log(Helios.Rocdata);

						for (var j = 0; j < Helios.Rocdata.length; j++) {
							let obj = {
								adr: "",
								value: ""
							}
							if (Helios.Rocdata[j].adr == 1) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.Rocdata[j].value[index];
								data.push(obj)
								//console.log(Helios.Rocdata[j].value[index]);
							}
							if (Helios.Rocdata[j].adr == 2) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.Rocdata[j].value[index];
								data.push(obj)
							}
							if (Helios.Rocdata[j].adr == 3) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.Rocdata[j].value[index];
								data.push(obj)
							}
							if (Helios.Rocdata[j].adr == 4) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.Rocdata[j].value[index];
								data.push(obj)
							}
							if (Helios.Rocdata[j].adr == 5) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.Rocdata[j].value[index];
								data.push(obj)
							}
							if (Helios.Rocdata[j].adr == 13) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.Rocdata[j].value[index];
								data.push(obj)
							}
							if (Helios.Rocdata[j].adr == 14) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.Rocdata[j].value[index];
								data.push(obj)
							}

							if (Helios.Rocdata[j].adr == 9) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.resnumber(Helios.Rocdata[j].agent[index], Helios.Rocdata[j].enbale[index]);
								data.push(obj);
							}
							if (Helios.Rocdata[j].adr == 10) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.resnumber(Helios.Rocdata[j].agent[index], Helios.Rocdata[j].enbale[index]);
								data.push(obj)
							}
						/* 	if (Helios.Rocdata[j].adr == 15) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.Rocdata[j].value[index];
								data.push(obj)
							}
							if (Helios.Rocdata[j].adr == 16) {
								obj.adr = Helios.Rocdata[j].adr;
								obj.value = Helios.Rocdata[j].value[index];
								data.push(obj)
							} */
						}
						//data.push( rocindex={roc:index} );
						/* for(var i=0;i<Helios.Roclength-5;i++){
							var obj={
								adr:"",
								value:""
							} 
						} */
						var obj = {
							"data": JSON.stringify(data),
							"action": "SET"
						}
						util.postattrajax(obj, function(data) {
							console.log(data);
							if (1 != data) {
								toast.$message({
									message: ' Error' + data,
									type: 'error',
									showClose: true,
									offset: 80
								});
							} else {
								setTimeout(() => {
									Helios.$data.canSave = true;
									toast.$message({
										message: "success:" + index,
										type: 'success',
										showClose: true,
										offset: 80
									});
								}, 1200);
							}
						});
					},

					//真假转换
					ResTruefalse(name, adr, value) {
						let obj = {
							name: "",
							adr: "",
							agent: [],
							enbale: [],
						}
						obj.adr = adr;
						obj.name = name;

						for (var i = 0; i < value.length; i++) {
							if ("0" == value[i]) {
								obj.agent.push(false);
								obj.enbale.push(false);
							}
							if ("1" == value[i]) {
								obj.agent.push(false);
								obj.enbale.push(true);
							}
							if ("2" == value[i]) {
								obj.agent.push(true);
								obj.enbale.push(false);
							}
							if ("3" == value[i]) {
								obj.agent.push(true);
								obj.enbale.push(true);
							}
						}
						return obj;
					},
					//真假转换为数字
					resnumber(agent, enbale) {
						if (agent == false && enbale == false) {
							return "0";
						} else if (agent == false && enbale == true) {
							return "1";
						} else if (agent == true && enbale == false) {
							return "2";
						} else if (agent == true && enbale == true) {
							return "3";
						}
					},

				},
			});
		</script>

	</body>
</html>
