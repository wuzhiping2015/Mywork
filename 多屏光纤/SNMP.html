<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>SNMP </title>
		<link rel="stylesheet" href="assets/css/bootstrap.min.css?2019827" />
		<link rel="stylesheet" href="assets/css/global.css?2019827" />
		<!-- Font Awesome -->
		<link rel="stylesheet" href="assets/css/font-awesome.min.css?2019827" />
		<!-- Theme style -->
		<link rel="stylesheet" href="assets/css/AdminLTE.min.css?2019827" />
		<link rel="stylesheet" href="assets/css/skins/skin-black.min.css?2019827" />
		<link rel="stylesheet" href="assets/css/index.css?2019827">
	</head>
	<style>
		.clear{
	 	 overflow: auto;
	 	  zoom: 1;
	 	  background: #fff;
	 }
	 .box-header.with-border {
	     padding-bottom: 14px;
	 }
	 .el-form-item__content{
		 margin-bottom: 8px;
	 }
</style>
	<body class="skin-black sidebar-open sidebar-mini">
		<div class="wrapper">
			<!-- 页头 -->
			<div id="comp-header" class="main-header" style="position: relative; z-index: 99;">
				<el-main-header></el-main-header>
			</div>
			<!-- 页头end -->


			<!-- 内容区域 -->
			<div id="content-wrapper">

				<!-- 主要内容显示 -->
				<section class="content container-fluid" id="MainContext" style="padding:15px; min-width: 1200px;">
					<section class="">
						<ol class="breadcrumb">
							<li>
								<a href="Ethernet.html">Ethernet</a>
							</li>
							<li>
								<a href="Modem.html">Modem</a>
							</li>
							<li>
								<a href="SNMP.html" style="font-weight: bold;">SNMP</a>
							</li>
							<li>
								<a href="VPN.html">VPN</a>
							</li>

						</ol>
					</section>
					<div class="wrapper" id="content" style="background:#f1f4f6; margin-top: 12px;">


						<div class="col-md-12" style="padding-left: 0px;">

							<div class="row">

								<!-- snpm2 START -->
								<div class="col-md-6">
									<div class="box">
										<div class="box-header with-border">
											<h3 class="box-title">SNMP V2</h3> <!-- GRPS -->
								<div class="box-tools pull-right" style="top: 9px;">
									<el-button @click="Setsnmp2" :disabled="!Set" size="small" type="primary">Set</el-button>
									<el-button @click="Getsnmp2(1)" :disabled="!Read" size="small">Read</el-button>
								</div>
										</div>
										<div class="clear" style="padding-top: 10px;">
											<el-form ref="snmp2data" label-width="180px" size="medium">
												<div class="col-md-12" v-for="(v,i) in  snmp2data" v-if="v.adr==140">
													<el-form-item :label="v.name">
														<el-switch v-model="v.value"></el-switch>
													</el-form-item>
												</div>
												<div class="col-md-10" v-for="(v,i) in snmp2data" v-if="v.adr!=140">
													<el-form-item :label="v.name">
														<el-input v-model="v.value"></el-input>
													</el-form-item>
												</div>
											</el-form>
										</div>
									</div>
								</div>

								<!-- snpm2 END -->

								<!-- snpm3 START -->
								<div class="col-md-6">
									<div class="box">
										<div class="box-header with-border">
											<h3 class="box-title">SNMP V3</h3>
											<div class="box-tools pull-right" style="top: 9px;">
												<el-button type="success" @click="onSubmit" size="small">数据同步</el-button>

											</div>
										</div>
										<div class="clear" style="padding-top: 10px;">
											<el-form ref="form" :model="form" label-width="180px" size="medium">
												<div class="col-md-10">
													<el-form-item label="SNMP Enable">

														<el-checkbox-group v-model="form.name1" size="small">
															<el-checkbox label="Enable" border></el-checkbox>
														</el-checkbox-group>
													</el-form-item>
													<el-form-item label="IP Address">
														<el-input v-model="form.tag" size=""></el-input>
													</el-form-item>

													<el-form-item label="Port">
														<el-input v-model="form.tag" size=""></el-input>
													</el-form-item>
													<el-form-item label="Hearbeat(min)">
														<el-input v-model="form.tag" size=""></el-input>
													</el-form-item>

													<el-form-item label="User Name">
														<el-input v-model="form.tag" size=""></el-input>
													</el-form-item>

													<el-form-item label="Auth">
														<el-select v-model="Auth_value" placeholder="请选择">
															<el-option v-for="item in Auth" :key="item.value" :label="item.label" :value="item.value">
															</el-option>
														</el-select>
													</el-form-item>

													<el-form-item label="AuthPass">
														<el-input v-model="form.tag" size=""></el-input>
													</el-form-item>

													<el-form-item label="Priv">
														<el-select v-model="Priv_value" placeholder="请选择">
															<el-option v-for="item in Priv" :key="item.value" :label="item.label" :value="item.value">
															</el-option>
														</el-select>
													</el-form-item>

													<el-form-item label="PrivPass">
														<el-input v-model="form.tag" size=""></el-input>
													</el-form-item>
												</div>


											</el-form>

										</div>
									</div>
								</div>
								<!-- snpm3 END -->
							</div>
						</div>
					</div>
				</section>
				<!-- 内容区域 -->
			</div>
		</div>
		<script type="text/javascript" src="assets/js/jquery.js"></script>
		<script type="text/javascript" src="assets/js/vue.js"></script>
		<script type="text/javascript" src="assets/js/index.js"></script>
		<script type="text/javascript" src="assets/js/comment.js"></script>
		<script type="text/javascript" src="assets/js/adminlte.js"></script>


		<script>
			let data = {
				equipment: sessionStorage.getItem("equipment"),
				url: sessionStorage.getItem("url"),
				form: {
					name: true,
					name1: false,
					tag: "数据整理中...",
				},

				Auth_value: '1',
				Priv_value: '1',
				Auth: [{
					value: '1',
					label: 'MD5'
				}, {
					value: '2',
					label: 'SHA'
				}],


				Priv: [{
					value: '1',
					label: 'DES'
				}, {
					value: '2',
					label: 'AES'
				}],




				Set: true,
				Read: true,

				snmp2data: [],
				snmp3data: []

			};
			var helios = new Vue({
				el: "#MainContext",
				data: data,
				beforeCreate() {
					/*console.log("创建前：");
					console.log(this.$data); */
				},
				created() {
					//  console.log("创建完成：");
					// console.log(this.$data);
					/* this.$data.hsulength = this.$data.HSU.length; */

				},
				beforeMount() {
					/* console.log("挂载前：");
					console.log(this.$data); */
					this.Getsnmp2();
				},
				mounted() {
					/* console.log("时时监控数据变化,并随之更新");*/
					$("body").resize();


				},

				updated() {


				},
				//事件
				methods: {
					onSubmit() {
						util.success("数据请求成功");
					},
					
					Getsnmp2(c) {
						var adr = [130, 131, 132, 133, 140]; /* 152 状态 */ /*  */
						var obj = {
							"data": adr.join(),
							"action": "READ"
						};
						util.getattrajax(obj, function(data) {
							var data = data.data;
							var data1 = [];
							if (data.length > 0) {
								if (c > 0) {
									helios.$data.Read = false;
									setTimeout(() => {
										helios.$data.Read = true;
										toast.$message({
											message: "success",
											type: 'success',
											showClose: true,
											offset: 10
										});
									}, 1200);
								}
								for (var i = 0; i < data.length; i++) {
									/* 	if (130 == data[i].adr) {
											let obj = {
												adr: data[i].adr,
												name: "SNMP VERSION",
												value: data[i].value
											}
											data1.push(obj);
										} */
									if (131 == data[i].adr) {
										let obj = {
											adr: data[i].adr,
											name: "SNMP IP",
											value: data[i].value
										}
										data1.push(obj);
									}
									if (132 == data[i].adr) {
										let obj = {
											adr: data[i].adr,
											name: "SNMP PORT",
											value: data[i].value
										}
										data1.push(obj);
									}
									if (133 == data[i].adr) {
										let obj = {
											adr: data[i].adr,
											name: "SNMP COMMUNITY",
											value: data[i].value,
											//value: data[i].value == "1" ? true : false
										}
										data1.push(obj);
									}
									if (140 == data[i].adr) {
										let obj = {
											adr: data[i].adr,
											name: "SNMP SWITCH",
											//value: data[i].value,
											value: data[i].value == "1" ? true : false
										}
										data1.push(obj);
									}
									if (141 == data[i].adr) {
										let obj = {
											adr: data[i].adr,
											name: "SNMP HEARTBEAT",
											value: data[i].value,
											//value: data[i].value == "1" ? true : false
										}
										data1.push(obj);
									}
								}
								console.log(data1);
								helios.snmp2data = data1;
							} else {
								toast.$message.error("Error");
							}
						})
					},
					Setsnmp2() {
						var adrs = [130, 131, 132, 133, 140]; // 与 新数据配对
						var data = [];
						for (var i = 0; i < helios.snmp2data.length; i++) {
							var obj = {
								adr: "",
								value: ""
							}
							/* if (130 == helios.snmp2data[i].adr) {
								obj.adr = helios.snmp2data[i].adr;
								obj.value = "3";
								data.push(obj);
							} */
							if (131 == helios.snmp2data[i].adr) {
								obj.adr = helios.snmp2data[i].adr;
								obj.value = helios.snmp2data[i].value;
								data.push(obj);
							}
							if (132 == helios.snmp2data[i].adr) {
								obj.adr = helios.snmp2data[i].adr;
								obj.value = helios.snmp2data[i].value;
								data.push(obj);
							}
							if (133 == helios.snmp2data[i].adr) {
								obj.adr = helios.snmp2data[i].adr;
								obj.value = helios.snmp2data[i].value;
								data.push(obj);
							}
							if (140 == helios.snmp2data[i].adr) {
								obj.adr = helios.snmp2data[i].adr;
								//obj.value = util.resnumber(helios.snmp2data[i].agent, helios.snmp2data[i].enbale);
								obj.value = helios.snmp2data[i].value == true ? "1" : "0";
								data.push(obj);
							}
						}

						var obj = {
							"data": JSON.stringify(data),
							"action": "SET"
						}

						util.postattrajax(obj, function(data) {
							if (1 != data) {
								toast.$message({
									message: ' Error:' + data.message,
									type: 'error',
									showClose: true,
									offset: 80
								});
							} else {
								toast.$message({
									message: "success",
									type: 'success',
									showClose: true,
									offset: 80
								});
							}
						});
					}
				
				},
				filters: {

				},



			});
		</script>


	</body>


</html>
